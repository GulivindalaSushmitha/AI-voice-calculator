<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŸ£ JARVIS Neon Voice Scientific Calculator</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Orbitron',sans-serif;}
body{
  margin:0;min-height:100vh;display:flex;
  justify-content:center;align-items:center;
  background:radial-gradient(circle at top,#3a0ca3,#000);
  color:#d6b3ff;
}
.card{
  width:95%;max-width:420px;padding:28px;
  border-radius:22px;background:rgba(140,0,255,0.12);
  backdrop-filter:blur(15px);
  box-shadow:0 0 30px #c77dff;
  text-align:center;
}
h1{margin:0;font-size:22px;}
.subtitle{font-size:12px;opacity:0.85;margin-bottom:12px;}

.listen-btn, select{
  width:100%;padding:12px;margin-top:8px;
  border:none;border-radius:14px;
  font-size:14px;cursor:pointer;
  background:linear-gradient(90deg,#9b5cff,#c77dff);
  color:#000;box-shadow:0 0 15px #c77dff;
}

.heard,.result{margin-top:15px;font-size:13px;word-wrap:break-word;}
.emoji{font-size:60px;margin-top:10px;}
footer{margin-top:20px;font-size:11px;opacity:0.7;}
.toggle{margin-top:8px;font-size:12px;}
</style>
</head>

<body>

<div class="card">
  <h1>ðŸ¤– JARVIS Scientific</h1>
  <div class="subtitle">Voice â€¢ English â€¢ Hindi â€¢ Telugu</div>

  <select id="languageSelect">
    <option value="en-US">English</option>
    <option value="hi-IN">Hindi</option>
    <option value="te-IN">Telugu</option>
  </select>

  <button class="listen-btn" onclick="startListening()">ðŸŽ¤ Start Listening</button>

  <div class="toggle">
    <input type="checkbox" id="continuousToggle">
    Continuous Listening Mode
  </div>

  <div class="heard" id="heardText"></div>
  <div class="result" id="result"></div>
  <div class="emoji" id="emoji"></div>

  <footer>AI Voice Scientific Calculator âš¡</footer>
</div>

<script>
let voices=[];
speechSynthesis.onvoiceschanged = () => {
  voices = speechSynthesis.getVoices();
};

/* SMART VOICE SELECTION */
function getVoice(langCode){
  return voices.find(v => v.lang.includes(langCode));
}

function speak(text, lang){
  const u = new SpeechSynthesisUtterance(text);
  u.rate = 0.95;
  u.pitch = 1;

  const voice = getVoice(lang);
  if(voice){
    u.voice = voice;
    u.lang = voice.lang;
  } else {
    u.lang = lang;
  }

  speechSynthesis.speak(u);
}

/* SPEAK RESULT */
function speakResult(result){
  speechSynthesis.cancel();

  setTimeout(()=>speak(`The answer is ${result}`,"en"),200);
  setTimeout(()=>speak(`à¤‰à¤¤à¥à¤¤à¤° ${result} à¤¹à¥ˆ`,"hi"),2000);
  setTimeout(()=>speak(`à°¸à°®à°¾à°§à°¾à°¨à°‚ ${result}`,"te"),3800);
}

/* START LISTENING */
function startListening(){
  const Speech = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!Speech){alert("Speech not supported");return;}

  const selectedLang = document.getElementById("languageSelect").value;
  const isContinuous = document.getElementById("continuousToggle").checked;

  const recognition = new Speech();
  recognition.lang = selectedLang;
  recognition.continuous = isContinuous;

  recognition.start();

  recognition.onresult = e => {
    const spoken = e.results[e.results.length-1][0].transcript.toLowerCase();
    document.getElementById("heardText").innerText="ðŸ§  You said: "+spoken;
    calculate(spoken);
  };
}

/* DEGREE TO RADIAN */
function toRadians(angle){
  return angle*(Math.PI/180);
}

/* PARSER */
function parseText(text){

  /* English */
  text=text
    .replace(/plus|add/g,"+")
    .replace(/minus|subtract/g,"-")
    .replace(/times|multiply/g,"*")
    .replace(/divide/g,"/")
    .replace(/square/g,"**2")
    .replace(/cube/g,"**3");

  /* Hindi */
  text=text
    .replace(/à¤œà¥‹à¤¡à¤¼/g,"+")
    .replace(/à¤˜à¤Ÿà¤¾à¤¨à¤¾/g,"-")
    .replace(/à¤—à¥à¤£à¤¾/g,"*")
    .replace(/à¤­à¤¾à¤—/g,"/")
    .replace(/à¤µà¤°à¥à¤—/g,"**2");

  /* Telugu */
  text=text
    .replace(/à°•à±‚à°¡à°¾/g,"+")
    .replace(/à°¤à°—à±à°—à°¿à°‚à°šà±/g,"-")
    .replace(/à°—à±à°£à°¿à°‚à°šà±/g,"*")
    .replace(/à°­à°¾à°—à°¿à°‚à°šà±/g,"/")
    .replace(/à°µà°°à±à°—à°‚/g,"**2");

  return text;
}

/* CALCULATE */
function calculate(text){
  try{
    let exp=parseText(text);

    /* Derivatives */
    if(text.includes("derivative of cos")){
      document.getElementById("result").innerText="âš¡ d/dx cos(x) = -sin(x)";
      speakResult("-sin x");
      return;
    }

    if(text.includes("derivative of sin")){
      document.getElementById("result").innerText="âš¡ d/dx sin(x) = cos(x)";
      speakResult("cos x");
      return;
    }

    if(text.includes("derivative of tan")){
      document.getElementById("result").innerText="âš¡ d/dx tan(x) = secÂ²(x)";
      speakResult("sec square x");
      return;
    }

    /* Integrals */
    if(text.includes("integral of cos")){
      document.getElementById("result").innerText="âš¡ âˆ«cos(x)dx = sin(x) + C";
      speakResult("sin x plus C");
      return;
    }

    if(text.includes("integral of sin")){
      document.getElementById("result").innerText="âš¡ âˆ«sin(x)dx = -cos(x) + C";
      speakResult("minus cos x plus C");
      return;
    }

    /* Scientific functions */
    exp=exp
      .replace(/sin\s*(\d+)/g,(m,x)=>Math.sin(toRadians(x)))
      .replace(/cos\s*(\d+)/g,(m,x)=>Math.cos(toRadians(x)))
      .replace(/tan\s*(\d+)/g,(m,x)=>Math.tan(toRadians(x)))
      .replace(/log\s*(\d+)/g,(m,x)=>Math.log10(x));

    const result = Function('"use strict";return ('+exp+')')();

    if(!isFinite(result)) throw "error";

    document.getElementById("result").innerText="âš¡ Result: "+result;
    document.getElementById("emoji").innerText=
      result>1000?"ðŸ˜²ðŸ”¥":result>=0?"ðŸ˜„":"ðŸ˜¢";

    speakResult(result);

  }catch{
    document.getElementById("result").innerText="âš  Invalid Expression";
    document.getElementById("emoji").innerText="ðŸ˜¢";
  }
}
</script>

</body>
</html>
